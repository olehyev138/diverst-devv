<div class="content__header">
  <h1>Permission groups</h1>
  <%= link_to "New permission group", new_policy_group_path, class: "btn btn--primary" if policy(PolicyGroup).new? %>
</div>

<div class="content__main">
  <div class="card">
    <div class="card__section">
      <table class="table--has-border" id="policy-groups-table">
        <thead>
          <th>Name</th>
          <th># of members</th>
          <th>Default group</th>
        </thead>
        <tbody>
          <% @policy_groups.each do |policy_group| %>
            <tr>
              <td><%= link_to policy_group.name, edit_policy_group_path(policy_group) %></td>
              <td><%= policy_group.users.count %></td>
              <td><%= policy_group.default_for_enterprise ? 'Yes': 'No'%></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="card">
    <h2>Permission group for new users</h2>
    New users will be assigned to <strong><%= current_user.enterprise.default_policy_group.name %></strong> permission group. You can change this in corresponding permission group's settings.
  </div>
</div>

<script>
  $(document).on('page:change', function() {
    $(document).off('page:change');

    $('#policy-groups-table').dataTable(Utility.mergeWithDTDefaults({
      order: [[2, "desc"]]
    }));
  });
</script>