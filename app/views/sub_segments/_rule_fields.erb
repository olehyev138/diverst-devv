<div class="nested-fields space-bottom segment-rule">
  <div class="flex-row flex-row--baseline">
    <div class="flex-row__cell">
      <%= link_to_remove_association f do %>
        <%= inline_svg('icons/remove.svg', class: "icon") %>
      <% end %>
    </div>
    <div class="flex-row__cell custom-field">
      <!-- customField with data-operators, data-type and data-options !-->
      <%= f.input :field_id, label: false, collection: current_user.enterprise.fields.all.map{|field| [field.title, field.id, {"data-operators" => SegmentRule.operators_for_field(field).to_json, "data-type" => field.class, "data-options" => (field.class.method_defined?(:options) ? field.options.to_json : "[]")}]} %>
    </div>
    <div class="flex-row__cell operator" style="display: none;">
      <!-- operatorField !-->
      <%= f.input :operator, input_html: { 'data-operator-id' => f.object.operator }, collection: [], label: false %>
    </div>
    <div class="flex-row__cell flex-row__cell--grow value-select" style="display: none;">
      <!-- valueField !-->
      <%= f.input :values, input_html: { class: "field__input", 'data-selected-values' => f.object.values, multiple: "multiple" }, label: false, collection: [], value: "", include_hidden: false %>
    </div>
  </div>
</div>
