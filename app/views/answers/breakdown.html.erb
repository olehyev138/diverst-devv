<div class="content__header">
  <h1>Answer details</h1>
</div>

<div class="content__main">
  <div class="card">
    <div class="card__section">
      <div class="answer" style="width: 100%;">
        <div class="answer__metadata">
          <span class="highlight"><%= @answer.author.name %></span>
          <span class="muted"><%= time_ago_in_words(@answer.created_at) %> ago</span>
        </div>
        <div class="answer__content">
          <% unless @answer.outcome.blank? %>
            <strong>Plausible business outcome:</strong>
            <p style="font-style: italic;" class="accent"><%= @answer.outcome %></p>
          <% end %>

          <p><%= @answer.content %></p>

          <% @answer.comments.each do |comment| %>
            <div class="comment">
              <p>
                <%= comment.content %> &mdash;
                <span class="accent"><%= comment.author.name %></span>
                <span class="muted"><%= time_ago_in_words(comment.created_at) %> ago</span> &mdash;
                <%= link_to "Delete", answer_comment_path(comment), method: :delete, class: 'error', data: { confirm: "Are you sure?" } %>
              </p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card__section">
      <h3>ROI breakdown</h3>

      <table class="table--has-border">
        <thead>
          <th>Item</th>
          <th>Type</th>
          <th>Value</th>
        </thead>
        <tbody>
          <tr>
            <td>Base value</td>
            <td></td>
            <td><strong><%= number_to_currency(@answer.value) %></strong></td>
          </tr>
          <% @answer.expenses.each do |expense| %>
            <tr>
              <td><%= expense.expense.name %></td>
              <td><%= expense.expense.income ? 'Income' : 'Expense' %></td>
              <td><%= number_to_currency(expense.expense.signed_price) %> x <%= expense.quantity %> = <strong><%= number_to_currency(expense.expense.signed_price * expense.quantity) %></strong></td>
            </tr>
          <% end %>
          <tr>
            <td><strong>Total</strong></td>
            <td></td>
            <td><strong><%= number_to_currency(@answer.total_value) %></strong> in <%= @answer.benefit_type == 0 ? "revenue" : "cost savings" %></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>