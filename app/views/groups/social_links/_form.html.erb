<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  .grid-container {
    display: grid;
    grid-column-gap: 10px;
    grid-row-gap: 10px;
    grid-template-columns: auto auto auto auto;
    padding-left: 100px;
    padding-right: 100px;
    padding-top: 10px;
    padding-bottom: 50px;

    grid-template-areas:
      "header header header header";
  }

  .grid-item {
    border: 1px solid rgba(0, 0, 0, 0.8);
    padding: 5px;
    font-size: 10px;
    text-align: center;
  }
  .grid-item-a {
    grid-area: header;
  }
</style>

<% def draw_urls(links) %>
  <div class="grid-container">
    <div class="grid-item-a">
      List of Valid URLS (* can be replaced with anything)
    </div>
    <% links.each do |name, urls| %>
      <div class="dropdown">
        <button class="btn btn-sm btn-primary btn-block grid-item dropbtn">
          <%= name %>
        </button>
        <div id="myDropdown" class="dropdown-content">
          <% urls.each do |url| %>
            <strong>
              <%= url %>
            </strong>
          <% end %>
        </div>
      </div>
    <% end; nil %>
  </div>
<% end %>

<div class="content__main">
  <div class="card">
    <div class="card__section">
      <%= simple_form_for @social_link, url: group_social_links_path do |f| %>
        <%= f.input :url, label: "URL", input_html: { autofocus: true } %>
        <%= f.association :segments, label: "#{c_t(:segment).pluralize}", collection: @group.enterprise.segments, input_html: { class: "select2-field-segments" } %>

        <%= f.simple_fields_for :news_feed_link, @social_link.news_feed_link do |nfl| %>
          <%= nfl.hidden_field :id, :value => nfl.object.id %>
          <%= nfl.hidden_field :news_feed_id, :value => @group.news_feed.id %>
          <%= nfl.association :segments, label: "#{c_t(:segment).pluralize}", collection: @group.enterprise.segments, input_html: { class: "select2-field-segments" } %>
          <%= nfl.association :shared_news_feeds, label: 'Share with other ' + "#{c_t(:erg).pluralize}", label_method: lambda { |n| "#{n.group.name}" }, collection: NewsFeed.where(:group_id => @group.enterprise.groups.ids).where.not(:group_id => @group.id), input_html: { class: "select2" } %>
        <% end %>
        <%= f.button :submit %>
      <% end %>
    </div>
    <% draw_urls(@links) if @links.present? %>
  </div>
</div>

<%= render partial: 'shared/select2_ajax_search.js.erb' %>

<script>
    var toggler = document.getElementsByClassName("carett");
    var i;
    for (i = 0; i < toggler.length; i++) {
        toggler[i].addEventListener("click", function() {
            this.parentElement.querySelector(".nested").classList.toggle("active");
            this.classList.toggle("carett-down");
        });
    }
</script>
