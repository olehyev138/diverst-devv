<%= render partial: 'components/group_selector', locals: { id: "group-scope-selector", classes: "group-selector-graphs", multiselect: true } %>

<div class="content__header">
  <h1>Overview</h1>
  <button type="button" class="btn btn--primary btn--small" style="margin-right: 8px;" data-toggle="modal" data-target="#group-scope-selector">Filter <%= c_t(:erg).pluralize %></button>
  <button type="button" class="btn btn--secondary btn--small" data-toggle="collapse" data-target="#groups-list-container" aria-expanded="false" aria-controls="groups-list-container">Show Filter</button>
</div>

<div class="content__main">
  <div id="groups-list-container" class="collapse">
    <div class="card">
      <div class="card__section">
        <h4><b>Filtered <%= c_t(:erg).pluralize %></b></h4>
        <div class="groups-list"><h4>No filter</h4></div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card__section">
      <div class="row">
        <div class="col md-6 sm-12">
          <div class="panel panel--primary text-center margin-bottom-0">
            <div class="panel-headline"><p><strong>Total <%= c_t(:erg).pluralize %></strong></p></div>
            <div class="panel-data"><p><b class="accent"><%= @group_metrics[:total_groups] %></b></p></div>
          </div>
        </div>

        <div class="col md-6 sm-12">
          <div class="panel panel--primary text-center margin-bottom-0">
            <div class="panel-headline"><p><strong>Average # of Members</strong></p></div>
            <div class="panel-data"><p><b class="accent"><%= @group_metrics[:avg_nb_members_per_group] %></b></p></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card__section">
      <div class="flex-row flex-row--middle">
        <div class="flex-row__cell flex-row__cell--grow">
          <h4><%= c_t(:erg) %> Population (All Users)</h4>
          <%= render 'components/range_selector' %>
          <div class="card__action">
            <a href="#" class="csv-export-link hidden-xs" data-url="<%= group_population_metrics_groups_path(format: :csv) %>">Export CSV</a>
          </div>
          <div id="group_population" class="graph" data-url="<%= group_population_metrics_groups_path %>">
            <svg></svg>
          </div>
          <input type="button" hidden class="drillout_button" value="Back"></input>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card__section">
      <div class="flex-row flex-row--middle">
        <div class="flex-row__cell flex-row__cell--grow">
          <h4>Views per <%= c_t(:erg) %></h4>
          <%= render 'components/range_selector' %>
          <div class="card__action">
            <a href="#" class="csv-export-link hidden-xs" data-url="<%= views_per_group_metrics_groups_path(format: :csv) %>">Export CSV</a>
          </div>
          <div id="views_per_group" class="graph" data-url="<%= views_per_group_metrics_groups_path %>">
            <svg></svg>
          </div>
          <input type="button" hidden class="drillout_button" value="Back"></input>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card__section">
      <div class="flex-row flex-row--middle">
        <div class="flex-row__cell flex-row__cell--grow">
          <h4>Growth of <%= c_t(:erg).pluralize %> (All Users)</h4>
          <%= render 'components/range_selector' %>
          <div class="card__action">
            <a href="#" class="csv-export-link hidden-xs" data-url="<%= growth_of_groups_metrics_groups_path(format: :csv) %>">Export CSV</a>
          </div>
          <div id="growth_of_groups" class="graph" data-url="<%= growth_of_groups_metrics_groups_path %>">
            <svg></svg>
          </div>
          <input type="button" hidden class="drillout_button" value="Back"></input>
        </div>
      </div>
    </div>
  </div>
</div>

<%= render partial: 'shared/select2_ajax_search.js.erb' %>